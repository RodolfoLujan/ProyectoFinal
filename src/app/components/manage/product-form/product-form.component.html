<div class="flex flex-col items-center px-40 mt-10">
    @if (id) {
        <h1> Actualizar producto</h1>
    }@else{
        <h1> Agregar nuevo producto</h1>
    }
    <form class="shadow p-4" [formGroup]="productForm">
        <div class="flex flex-wrap">

            <mat-form-field class="w-full">
                <mat-label>Categoria</mat-label>
                <mat-select formControlName="categoryId" >
                @for (item of categories; track $index) {
                    <mat-option [value]="item._id">{{item.name}}</mat-option>
                }                          
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Marca</mat-label>
                <mat-select formControlName="brandId" >         
                @for (item of brands; track $index) {
                    <mat-option [value]="item._id">{{item.name}}</mat-option>
                }            
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Nombre</mat-label>
                <input matInput type="text" formControlName="name"/>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Peque√±a Descripcion</mat-label>
                <input matInput type="text" formControlName="shortDescription"/>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Descripcion</mat-label>
                <textarea matInput type="text" rows="5" formControlName="description"> </textarea>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Precio</mat-label>
                <input matInput type="number" formControlName="price"/>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Descuento</mat-label>
                <input matInput type="number" formControlName="discount"/>
            </mat-form-field>

            <div class="w-full flex flex-col" formArrayName="images">
                <div class="flex justify-between "><h4>Imagenes</h4> 
                    <button mat-raised-button color="primary" (click)="addImage()">
                    Agregar Imagen</button> 
                    <button mat-raised-button color="primary" (click)="removeImage()">
                        Eliminar Imagen</button> 
                </div> 
                
                @for (item of images.controls; track $index) {
                    <mat-form-field class="w-full">
                        <mat-label>Imagen {{$index+1}}</mat-label>
                        <input matInput type="text" [formControlName]="$index"/>
                    </mat-form-field>  
                }  
            </div>        

        </div>
        <div class="flex justify-center ">
            @if (id) {
                <button mat-raised-button color="primary" [disabled]="productForm.invalid" (click)="updateProduct()">Actualizar</button>
            }@else {
                <button mat-raised-button color="primary" [disabled]="productForm.invalid" (click)="addProduct()">Agregar</button>
            }
        </div>     
    </form>
</div>